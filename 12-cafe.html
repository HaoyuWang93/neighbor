
<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TYO-08/09/2032</title>
<script src="aframe/aframe.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="css/custom.css">
<meta name="viewport" content="width=device-width, initial-scale=1">

<div style='position: fixed;
bottom: 15px;
left: 20px;
width:100%;
text-align: left;
z-index: 1;'>
  <a href="11-monologue.html"><button class="button">PREVIOUS</button></a>
</div>

<div style='position: fixed;
  bottom: 15px;
  left: 120px;
  width:100%;
  text-align: left;
  z-index: 1;'>
    <a href="13-elevator.html"><button class="button">SKIP</button></a>
</div>

<div style='position: fixed;
top: 15px;
left: 20px;
width:100%;
text-align: left;
z-index: 1;'>
  <a href="https://haoyuwang93.github.io/anotherfuture/"><button class="button">HOME</button></a>
</div>
</head>

<body>

<div id="preload">
  <p id="intro">
      08/09/2032<br>
      @3F CAFE<br>
      Coffee after weeks of intense work
</div>

<script>
window.addEventListener("load", function(){
    setInterval(pippo, 3000);
});
function pippo(){
    var load_screen = document.getElementById("preload");
    document.body.removeChild(load_screen);
}

AFRAME.registerComponent("talk0", {
  init: function() {
     var pieces = document.querySelectorAll(".chat, .clickable")
     this.el.addEventListener("click", e => {
       for (let piece of pieces) {
         piece.emit("show0")}
     }, {once: true})
   }
})

AFRAME.registerComponent("proc1", {
  init: function() {
    var pieces = document.querySelectorAll(".chat, .clickable")
     this.el.addEventListener("click", e => {
       for (let piece of pieces) {
         piece.emit("show1")}
     }, {once: true})
   }
})

AFRAME.registerComponent("proc2", {
  init: function() {
    var pieces = document.querySelectorAll(".chat, .clickable")
     this.el.addEventListener("click", e => {
       for (let piece of pieces) {
         piece.emit("show2")}
     }, {once: true})
   }
})

AFRAME.registerComponent("proc3", {
  init: function() {
     var pieces = document.querySelectorAll(".chat, .clickable")
     this.el.addEventListener("click", e => {
       for (let piece of pieces) {
         piece.emit("show3")}
     }, {once: true})
   }
})

  AFRAME.registerComponent("weblink", {
  schema: {
    url: {
      default: ""
    }
  },
  init: function() {
    this.el.addEventListener("click", (e) => {
      window.location = this.data.url;
    })
  }
})
</script>

<a-scene raycaster="objects: .clickable" cursor="rayOrigin: mouse; fuse:false"
loading-screen="dotsColor: white; backgroundColor: black">

<a-assets>
<img id="cafe" src="images/cafe.jpg">
<img id="13f" src="images/direction/13f.png">
<img id="talk" src="images/screen/talk.png">
<img id="proceed" src="images/screen/proceed.png" alt="">
</a-assets>

  <a-sky id="skyid" src="#cafe" rotation="0 -90 0"></a-sky>

  <a-text class="chat"
    value="...I guess the typhoon is leaving...
    Anyway, how do you like my new design?"
    color="#800080" line-height=55 align=left
    width="1.1" rotation="0 -90 0" position="1 1.65 0.25"
    animation__hide1="startEvents: show1; property: visible; to: false">
  </a-text>

  <a-image id="talkbutton" class="clickable"
    src= "#talk" rotation="0 -90 0" width="0.3" height="0.15" position="1 1.5 -0.1"
    animation__flash="property: opacity; from: 1; to: 0; dur: 600; dir: alternate; loop: true"
    animation__off0="startEvents: show0; property: scale; to: 0 0 0; dur: 100"
    talk0>
   </a-image>

  <a-text class="chat" opacity="0"
    value="I'd better pass on that...what made you remove all
    your old wood, I mean you had the ONLY real
    wooden furnishing of the whole building"
    color="black" line-height=55 align=right
    width="1.1" rotation="0 -90 0" position="1 1.5 0.1"
    animation__show0="startEvents: show0; property: opacity; to: 1; dur: 500"
    animation__hide1="startEvents: show1; property: visible; to: false">
  </a-text>

  <a-text class="chat" opacity="0"
    value="There's still one piece left for contrast though,
    and now I have the only monochromatic room of
    the building...maybe of the whole city as everyone
    follows Tokyo Health's mental health guides..."
    color="#800080" line-height=55 align=left
    width="1.1" rotation="0 -90 0" position="1 1.4 0.25"
    animation__show0="startEvents: show0; property: opacity; to: 1; dur: 500; delay: 5000"
    animation__hide1="startEvents: show1; property: visible; to: false">
  </a-text>

  <a-text class="chat" opacity="0"
    value="Talking about furnishing addicts,
    your upstairs may have more to say"
    color="#800080" line-height=55 align=left
    width="1.1" rotation="0 -90 0" position="1 1.15 0.25"
    animation__show0="startEvents: show0; property: opacity; to: 1; dur: 500; delay: 9000"
    animation__hide1="startEvents: show1; property: visible; to: false">
  </a-text>

  <a-image id="proc1" class="clickable" scale="0 0 0"
    src= "#proceed" rotation="0 -90 0" width="0.3" height="0.15" position="1 1.3 -0.1"
    animation__on0="startEvents: show0; property: scale; to: 1 1 1; dur: 100; delay: 10000"
    animation__flash="property: opacity; from: 1; to: 0; dur: 600; dir: alternate; loop: true"
    animation__off1="startEvents: show1; property: scale; to: 0 0 0; dur: 100"
    proc1>
   </a-image>

   <a-text class="chat" opacity="0"
     value="How comes? I was stuck in VR for work
     and seems like I missed a lot"
     color="black" line-height=55 align=right
     width="1.1" rotation="0 -90 0" position="1 1.5 0.1"
     animation__show1="startEvents: show1; property: opacity; to: 1; dur: 500"
     animation__hide2="startEvents: show2; property: visible; to: false">
   </a-text>

   <a-text class="chat" opacity="0"
     value="He's caught flying back from outside on Monday,
     trying to drop something big to his room
     through window"
     color="#800080" line-height=55 align=left
     width="1.1" rotation="0 -90 0" position="1 1.5 0.25"
     animation__show1="startEvents: show1; property: opacity; to: 1; dur: 500; delay: 3000"
     animation__hide2="startEvents: show2; property: visible; to: false">
   </a-text>

   <a-text class="chat" opacity="0"
     value="...don't know how he got the vehicle in an
     L4 lockdown but the Tokyo Health drones came
     after and found him positive as expected"
     color="#800080" line-height=55 align=left
     width="1.1" rotation="0 -90 0" position="1 1.3 0.25"
     animation__show1="startEvents: show1; property: opacity; to: 1; dur: 500; delay: 3000"
     animation__hide2="startEvents: show2; property: visible; to: false">
   </a-text>

   <a-image id="proc2" class="clickable" scale="0 0 0"
     src= "#proceed" rotation="0 -90 0" width="0.3" height="0.15" position="1 1.3 -0.1"
     animation__on1="startEvents: show1; property: scale; to: 1 1 1; dur: 100; delay: 4000"
     animation__flash="property: opacity; from: 1; to: 0; dur: 600; dir: alternate; loop: true"
     animation__off2="startEvents: show2; property: scale; to: 0 0 0; dur: 100"
     proc2>
    </a-image>

    <a-text class="chat" opacity="0"
      value="wait...he wasn't caught inside, right?"
      color="black" line-height=55 align=right
      width="1.1" rotation="0 -90 0" position="1 1.5 0.1"
      animation__show2="startEvents: show2; property: opacity; to: 1; dur: 500">
    </a-text>

    <a-text class="chat" opacity="0"
      value="That's the fortunate part for us; he was
      stopped by his window and sent to the station"
      color="#800080" line-height=55 align=left
      width="1.1" rotation="0 -90 0" position="1 1.5 0.25"
      animation__show2="startEvents: show2; property: opacity; to: 1; dur: 500; delay: 2000">
    </a-text>

    <a-text class="chat" opacity="0"
      value="What a lovely neighbor...
      we may have been marked by the department!
      He seems never lived with other people before
      so didn't know how community works..."
      color="#800080" line-height=55 align=left
      width="1.1" rotation="0 -90 0" position="1 1.25 0.25"
      animation__show2="startEvents: show2; property: opacity; to: 1; dur: 500; delay: 5000">
    </a-text>

    <a-text class="chat" opacity="0"
      value="- -"
      color="black" line-height=55 align=center
      width="5" rotation="0 -90 0" position="1 1 0.5"
      animation__show2="startEvents: show2; property: opacity; to: 1; dur: 500; delay: 6000">
    </a-text>

    <a-image id="out" class="clickable" scale="0 0 0"
     src= "#13f" width="0.4" height="0.4" position="0.3 1.8 -2" rotation="0 0 0"
     animation__on2="startEvents: show2; property: scale; to: 1 1 1; dur: 100; delay: 7000"
     animation__flash="property: opacity; from: 1; to: 0; dur: 600; dir: alternate; loop: true"
     weblink="url: 13-elevator.html">
 </a-image>

</a-scene>

</body>
</html
